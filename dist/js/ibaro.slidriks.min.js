"use strict";function _classCallCheck(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function i(i,e){for(var s=0;s<e.length;s++){var t=e[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}return function(e,s,t){return s&&i(e.prototype,s),t&&i(e,t),e}}(),Slidriks=function(){function i(e){var s=this;_classCallCheck(this,i),document.querySelectorAll(e).forEach(function(i,e){var t={id:"slidriks"+e,views:4,width:i.offsetWidth,navigate:!0,paginate:!0,childSize:i.children.length,childWidth:i.offsetWidth/4};i.dataset.slidriksId=t.id,window.sessionStorage.setItem("slidriks"+e,JSON.stringify(t)),s.init(i)})}return _createClass(i,[{key:"init",value:function(i){var e=i.innerHTML,s=JSON.parse(window.sessionStorage.getItem(i.dataset.slidriksId));i.classList.add("slidriks--main"),i.innerHTML='<div class="slidriks--slider" id="'+s.id+'"><div class="slidriks--wrapper"><div class="slidriks--content" style="width: '+s.childWidth*s.childSize+'px;transform: translateX(0px);" data-slidriks-x="0">'+e+'</div></div><div class="slidriks--controls"><div class="slidriks--navigation"></div><div class="slidriks--paginate"></div></div>',i.querySelectorAll(".slidriks--content > *").forEach(function(i){i.outerHTML='<div class="slidriks--children" style="width: '+s.childWidth+'px;">'+i.outerHTML+"</div>"}),s.navigate&&this.navigate(s),s.paginate&&this.paginate(s),this.animation=null,this.mousedown(s),this.mousemove(s),this.mouseup(s)}},{key:"navigate",value:function(i){var e=this,s=window[i.id];s.querySelector(".slidriks--navigation").insertAdjacentHTML("beforeend",'<div class="slidriks--side slidriks--side-prev">&#8249;</div><div class="slidriks--side slidriks--side-next">&#8250;</div>'),s.querySelectorAll(".slidriks--side").forEach(function(t){t.addEventListener("click",function(n){var r=parseFloat(s.querySelector(".slidriks--content").style.transform.replace(/translateX\(|px\)/g,""));if(t.classList.contains("slidriks--side-prev")){if(r>=0)return;e.slide(i,r+i.childWidth)}else{if(-(i.childWidth*i.childSize-i.width)>=r)return;e.slide(i,r-i.childWidth)}})})}},{key:"paginate",value:function(i){for(var e=this,s=Math.floor(i.childSize/i.views)+(i.childSize%i.views!=0?1:0),t=window[i.id],n=t.querySelector(".slidriks--content"),r=0;r<s;r++)t.querySelector(".slidriks--paginate").insertAdjacentHTML("beforeend",'<span class="slidriks--page">'+r+"</span>");t.querySelectorAll(".slidriks--page").forEach(function(s){s.addEventListener("click",function(t){var r=i.views*parseInt(s.textContent),a=n.children[r+i.views-1]?n.children[r]:n.children[r-(i.views-i.childSize%i.views)],d=a.offsetLeft;e.slide(i,-d)})})}},{key:"slide",value:function(i,e){var s=window[i.id].querySelector(".slidriks--content");s.classList.add("slidriks--animation"),s.dataset.slidriksX=e,s.style.transform="translateX("+e+"px)",clearTimeout(this.animation),this.animation=setTimeout(function(){s.classList.remove("slidriks--animation")},310)}},{key:"mousedown",value:function(i){var e=window[i.id],s=e.querySelector(".slidriks--content");e.addEventListener("mousedown",function(i){s.classList.add("slidriks--mousemove"),s.dataset.slidriksClick=i.screenX})}},{key:"mousemove",value:function(i){var e=window[i.id],s=e.querySelector(".slidriks--content");document.addEventListener("mousemove",function(e){if(s.classList.contains("slidriks--mousemove")){var t=parseFloat(s.dataset.slidriksX),n=s.dataset.slidriksClick,r=n-e.screenX;if(t-r>0)return void(s.style.transform="translateX(0px)");if(t-r<-(i.childWidth*i.childSize-i.width))return;s.style.transform="translateX("+(t-r)+"px)"}})}},{key:"mouseup",value:function(i){var e=this,s=window[i.id],t=s.querySelector(".slidriks--content");"mouseleave mouseup".split(" ").map(function(s){document.addEventListener(s,function(){if(t.classList.contains("slidriks--mousemove")){var s=parseFloat(t.style.transform.replace(/translateX\(|px\)/g,"")),n=Math.abs(s),r=Math.floor(n/i.childWidth),a=n-r*i.childWidth>i.childWidth/2?r+1:r,d=t.children[a].offsetLeft;t.classList.remove("slidriks--mousemove"),e.slide(i,-d)}})})}}]),i}();